:orphan:

:mod:`wildboar.datasets._repository`
====================================

.. py:module:: wildboar.datasets._repository


Module Contents
---------------

Classes
~~~~~~~

.. autoapisummary::

   wildboar.datasets._repository.Bundle
   wildboar.datasets._repository.JSONRepository
   wildboar.datasets._repository.NpBundle
   wildboar.datasets._repository.Repository
   wildboar.datasets._repository.RepositoryCollection




Attributes
~~~~~~~~~~

.. autoapisummary::

   wildboar.datasets._repository.DEFAULT_TAG


.. data:: DEFAULT_TAG
   :annotation: = default

   

.. class:: Bundle(*, key, version, name, arrays=None, description=None, collections=None)


   Base class for handling dataset bundles

   .. attribute:: name

      Human-readable name of the bundle

      :type: str

   .. attribute:: description

      Description of the bundle

      :type: str

   .. attribute:: label_index

      Index of the class label(s)

      :type: int or array-like

   Construct a bundle

   :param key: A unique key of the bundle
   :type key: str
   :param version: The version of the bundle
   :type version: str
   :param name: Human-readable name of the bundle
   :type name: str
   :param description: Description of the bundle
   :type description: str
   :param arrays: The arrays of the dataset
   :type arrays: list

   .. method:: get_collection(self, collection)


   .. method:: get_filename(self, version=None, tag=None, ext=None)


   .. method:: list(self, archive, collection=None)

      List all datasets in this bundle

      :param archive: The bundle file
      :type archive: ZipFile
      :param collection: The collection name
      :type collection: str, optional

      :returns: **dataset_names** -- A sorted list of datasets in the bundle
      :rtype: list


   .. method:: load(self, name, archive)

      Load a dataset from the bundle

      :param name: Name of the dataset
      :type name: str
      :param archive: The zip-file bundle
      :type archive: ZipFile

      :returns: * **x** (*ndarray*) -- Data samples
                * **y** (*ndarray*) -- Data labels
                * **n_training_samples** (*int*) -- Number of samples that are for training. The value is <= x.shape[0]
                * **extras** (*dict, optional*) -- Extra numpy arrays



.. class:: JSONRepository(url)


   Bases: :py:obj:`Repository`

   A repository is a collection of bundles

   .. attribute:: supported_version
      :annotation: = 1.1

      

   .. method:: download_url(self)
      :property:

      The url template for downloading bundles

      :returns: **str**
      :rtype: the download url


   .. method:: get_bundles(self)

      Get all bundles

      :returns: **dict**
      :rtype: a dictionary of key and bundle


   .. method:: name(self)
      :property:

      Name of the repository

      :returns: **str**
      :rtype: the name of the repository


   .. method:: refresh(self)

      Refresh the repository


   .. method:: version(self)
      :property:

      The repository version

      :returns: **str**
      :rtype: the version of the repository


   .. method:: wildboar_requires(self)
      :property:

      The minimum required wildboar version

      :returns: **str**
      :rtype: the min version



.. class:: NpBundle(*, key, version, name, arrays=None, description=None, collections=None)


   Bases: :py:obj:`Bundle`

   bundle of numpy binary files

   Construct a bundle

   :param key: A unique key of the bundle
   :type key: str
   :param version: The version of the bundle
   :type version: str
   :param name: Human-readable name of the bundle
   :type name: str
   :param description: Description of the bundle
   :type description: str
   :param arrays: The arrays of the dataset
   :type arrays: list


.. class:: Repository

   A repository is a collection of bundles

   .. method:: clear_cache(self, cache_dir, keep_last_version=True)


   .. method:: download_url(self)
      :property:

      The url template for downloading bundles

      :returns: **str**
      :rtype: the download url


   .. method:: get_bundle(self, key)

      Get a bundle with the specified key

      :param key: Key of the bundle
      :type key: str

      :returns: **bundle** -- A bundle or None
      :rtype: Bundle, optional


   .. method:: get_bundles(self)
      :abstractmethod:

      Get all bundles

      :returns: **dict**
      :rtype: a dictionary of key and bundle


   .. method:: list_datasets(self, bundle, *, cache_dir, collection=None, version=None, tag=None, create_cache_dir=True, progress=True, force=False)


   .. method:: load_dataset(self, bundle, dataset, *, cache_dir, version=None, tag=None, create_cache_dir=True, progress=True, dtype=None, force=False)


   .. method:: name(self)
      :property:

      Name of the repository

      :returns: **str**
      :rtype: the name of the repository


   .. method:: refresh(self)

      Refresh the repository


   .. method:: version(self)
      :property:

      The repository version

      :returns: **str**
      :rtype: the version of the repository


   .. method:: wildboar_requires(self)
      :property:

      The minimum required wildboar version

      :returns: **str**
      :rtype: the min version



.. class:: RepositoryCollection


   .. method:: __contains__(self, item)


   .. method:: __getitem__(self, item)


   .. method:: __iter__(self)


   .. method:: append(self, item)



